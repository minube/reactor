var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _propTypes=require("prop-types");var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _common=require("../../common");var _Activity=_interopRequireDefault(require("../Activity"));var _components=require("./components");var _modules=require("./modules");var _Calendar=_interopRequireDefault(require("./Calendar.style"));var _jsxFileName="/Users/soyjavi/git/minube/reactor/components/Calendar/Calendar.js";var VISIBLE_WEEKS=Array.from(Array(6).keys());var Calendar=function(_PureComponent){(0,_inherits2.default)(Calendar,_PureComponent);function Calendar(props){var _this;(0,_classCallCheck2.default)(this,Calendar);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Calendar).call(this,props));_this._onPrevious=function(){var _assertThisInitialize=(0,_assertThisInitialized2.default)(_this),_onChange=_assertThisInitialize._onChange;var _assertThisInitialize2=(0,_assertThisInitialized2.default)(_this),_assertThisInitialize3=_assertThisInitialize2.state,month=_assertThisInitialize3.month,year=_assertThisInitialize3.year;if(month===0){month=12;year-=1;}month-=1;_onChange(month,year);};_this._onNext=function(){var _assertThisInitialize4=(0,_assertThisInitialized2.default)(_this),_onChange=_assertThisInitialize4._onChange;var _assertThisInitialize5=(0,_assertThisInitialized2.default)(_this),_assertThisInitialize6=_assertThisInitialize5.state,month=_assertThisInitialize6.month,year=_assertThisInitialize6.year;if(month===11){month=-1;year+=1;}month+=1;_onChange(month,year);};_this._onChange=function(month,year){var _assertThisInitialize7=(0,_assertThisInitialized2.default)(_this),onChange=_assertThisInitialize7.props.onChange;onChange(month,year);_this.setState({month:month,year:year});};var value=props.value,date=props.date;var today=!_common.ENV.IS_TEST?new Date():new Date(1980,3,10);today.setHours(0,0,0,0);_this.state=(0,_objectSpread2.default)({today:today},(0,_modules.decomposeDate)(value||date||today));return _this;}(0,_createClass2.default)(Calendar,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(_ref){var date=_ref.date,value=_ref.value;var props=this.props;if(value&&value!==props.value||date&&date!==props.date){this.setState((0,_objectSpread2.default)({},(0,_modules.decomposeDate)(value||date)));}}},{key:"render",value:function render(){var _onNext=this._onNext,_onPrevious=this._onPrevious,_this$props=this.props,busy=_this$props.busy,_this$props$locale=_this$props.locale,DAY_NAMES=_this$props$locale.DAY_NAMES,MONTHS=_this$props$locale.MONTHS,onSelect=_this$props.onSelect,props=(0,_objectWithoutProperties2.default)(_this$props,["busy","locale","onSelect"]),state=this.state;var startDate=new Date(state.year,state.month);var weekNumber=Math.ceil((startDate-new Date(state.year,0,1))/8.64e7/7);var disabledPrevious=props.disabledPast&&state.today.getFullYear()===state.year&&state.today.getMonth()===state.month;return _react.default.createElement(_reactNative.View,{style:[_Calendar.default.container,props.style],__source:{fileName:_jsxFileName,lineNumber:110}},busy&&_react.default.createElement(_Activity.default,{size:"large",style:_Calendar.default.activity,__source:{fileName:_jsxFileName,lineNumber:111}}),_react.default.createElement(_reactNative.View,{style:busy&&_Calendar.default.busy,__source:{fileName:_jsxFileName,lineNumber:112}},_react.default.createElement(_components.Selector,(0,_extends2.default)({},state,{locale:MONTHS,onNext:_onNext,onPrevious:!disabledPrevious?_onPrevious:undefined,__source:{fileName:_jsxFileName,lineNumber:113}})),_react.default.createElement(_components.DayNames,{locale:DAY_NAMES,__source:{fileName:_jsxFileName,lineNumber:119}}),VISIBLE_WEEKS.map(function(weekIndex){return _react.default.createElement(_components.Week,(0,_extends2.default)({},props,state,{key:weekNumber+weekIndex,firstDate:(0,_modules.firstDateOfWeek)(weekNumber+weekIndex,state.year),onSelect:!busy?onSelect:undefined,__source:{fileName:_jsxFileName,lineNumber:121}}));})));}}]);return Calendar;}(_react.PureComponent);Calendar.propTypes={availableDates:(0,_propTypes.arrayOf)((0,_propTypes.shape)()),busy:_propTypes.bool,captions:(0,_propTypes.arrayOf)((0,_propTypes.shape)()),date:(0,_propTypes.shape)(),disabledDates:(0,_propTypes.arrayOf)((0,_propTypes.shape)()),disabledPast:_propTypes.bool,locale:(0,_propTypes.shape)(),onChange:_propTypes.func,onSelect:_propTypes.func,range:_propTypes.bool,value:(0,_propTypes.oneOfType)([(0,_propTypes.shape)(),(0,_propTypes.arrayOf)((0,_propTypes.shape)())])};Calendar.defaultProps={availableDates:undefined,busy:false,date:undefined,captions:undefined,disabledDates:undefined,disabledPast:false,locale:_modules.LOCALE,onChange:function onChange(){},onSelect:function onSelect(){},range:false,value:undefined};var _default=Calendar;exports.default=_default;