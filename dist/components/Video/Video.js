var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _propTypes=require("prop-types");var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _Activity=_interopRequireDefault(require("../Activity"));var _modules=require("./modules");var _Video=_interopRequireDefault(require("./Video.style"));var _jsxFileName="/Users/soyjavi/git/minube/reactor/components/Video/Video.js";var Video=function(_Component){(0,_inherits2.default)(Video,_Component);function Video(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,Video);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(Video)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={ready:false};_this._onLoad=function(){var _assertThisInitialize=(0,_assertThisInitialized2.default)(_this),onLoad=_assertThisInitialize.props.onLoad;_this.setState({ready:true});onLoad();};return _this;}(0,_createClass2.default)(Video,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(_ref,_ref2){var autoPlay=_ref.autoPlay,source=_ref.source;var ready=_ref2.ready;var _this$el=this.el,el=_this$el===void 0?{}:_this$el,props=this.props,state=this.state;if(el.play&&el.pause)el[autoPlay?'play':'pause']();return source!==props.source||ready!==state.ready;}},{key:"render",value:function render(){var _this2=this;var _onLoad=this._onLoad,_this$props=this.props,autoPlay=_this$props.autoPlay,controls=_this$props.controls,height=_this$props.height,onLoad=_this$props.onLoad,preload=_this$props.preload,source=_this$props.source,width=_this$props.width,inherit=(0,_objectWithoutProperties2.default)(_this$props,["autoPlay","controls","height","onLoad","preload","source","width"]),ready=this.state.ready;var embed=(0,_modules.embedUrl)(source);var dimensions={height:height,width:width,maxHeight:height,maxWidth:width};var pointerEvents=!controls?'none':undefined;return _react.default.createElement(_reactNative.View,{pointerEvents:!controls&&autoPlay?'none':undefined,style:[_Video.default.container,dimensions,!ready&&_Video.default.loading,inherit.style],__source:{fileName:_jsxFileName,lineNumber:64}},!ready&&_react.default.createElement(_Activity.default,{size:"large",style:_Video.default.activity,__source:{fileName:_jsxFileName,lineNumber:68}}),embed?_react.default.createElement("iframe",{allowFullScreen:true,key:embed,frameBorder:0,onLoad:_onLoad,pointerEvents:pointerEvents,width:"100%",height:"100%",src:embed+"&autoplay="+(autoPlay?1:0),title:embed,__source:{fileName:_jsxFileName,lineNumber:72}}):_react.default.createElement("video",(0,_extends2.default)({},inherit,{ref:function ref(el){_this2.el=el;},autoPlay:autoPlay,controls:controls?'true':undefined,onLoadedData:_onLoad,pointerEvents:pointerEvents,preload:preload?'auto':'none',style:{objectFit:'cover',width:width,height:height},__source:{fileName:_jsxFileName,lineNumber:84}}),_react.default.createElement("source",{src:source,__source:{fileName:_jsxFileName,lineNumber:94}}),_react.default.createElement("track",{kind:"captions",__source:{fileName:_jsxFileName,lineNumber:95}})));}}]);return Video;}(_react.Component);Video.propTypes={autoPlay:_propTypes.bool,controls:_propTypes.bool,height:_propTypes.number,onLoad:_propTypes.func,preload:_propTypes.bool,source:_propTypes.string.isRequired,width:_propTypes.number};Video.defaultProps={autoPlay:false,controls:false,height:180,onLoad:function onLoad(){},preload:false,width:320};var _default=Video;exports.default=_default;